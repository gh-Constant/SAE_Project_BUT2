enum Role {
  admin
  aventurier
  prestataire
}

enum AvatarType {
  gallery
  upload
}

model User {
  id_user         Int       @id @default(autoincrement())
  firstname       String    @db.VarChar(255)
  lastname        String    @db.VarChar(255)
  birth_date      DateTime?  
  bio             String?   @db.Text

  phone           String?   @db.Char(20)
  email           String    @db.VarChar(255) @unique

  role            Role
  avatar_url      String    @db.VarChar(255)
  avatar_type     AvatarType @default(gallery)
  level           Int
  xp              Float     @db.Double

  is_verified     Boolean
  password_hashed String   @db.Text

  presentation    String?  @db.LongText

  created_at      DateTime? @default(now()) @db.DateTime(0)
  updated_at      DateTime? @updatedAt @db.DateTime(0)

  id_prestataire_type Int
  
  prestataire_type PrestataireType @relation(fields: [id_prestataire_type], references: [id_prestataire_type])
  locations        Location[]
  services         Service[]
  products         Product[]

  userQuests        UserQuest[]
  commandes         Commande[]
  lignesPanier      LignePanier[]
  eventReservations EventReservation[]
  
  // QR Code relations
  qrSessionsCreated QRSession[] @relation("QRCreator")
  qrSessionsScanned QRSession[] @relation("QRScanner")

  @@map("users")
}